<!DOCTYPE html>
<html lang="zh">
    <head>
    <!-- 
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.0 -->

    <!-- Title -->
    
    <title>
        
            Mojo 框架基本使用（perl语言） | 
        
        Mystery0の小站
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Meta & Info -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Mystery0 M">
    <meta name="description" content="要么做第一个，要么做最好的一个。">
    <meta name="keywords" content="null">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Mystery0の小站">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://imystery0.cn">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Mojo 框架基本使用（perl语言） | Mystery0の小站">
    <meta property="og:description" content="要么做第一个，要么做最好的一个。">
    

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS -->
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="/css/style.min.css">
    <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }
</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(/img/bg.jpg);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>



    <script src="/js/jquery.min.js"></script>
    <script src="/js/queue.js"></script>

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"/css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    

    

    <!-- Bing Background -->
    

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#说在前面"><span class="post-toc-number">1.</span> <span class="post-toc-text">说在前面</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#原理"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">原理</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#缺点"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">缺点</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#部署过程以及简单教程"><span class="post-toc-number">2.</span> <span class="post-toc-text">部署过程以及简单教程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#以下是linux的教程，windows用户请往下翻"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">以下是linux的教程，windows用户请往下翻</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#所用配置"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">所用配置</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#说明"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">说明</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#客户端配置"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">客户端配置</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装perl"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">安装perl</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#注意"><span class="post-toc-number">2.4.1.</span> <span class="post-toc-text">注意</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装cpanm"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">安装cpanm</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#安装Mojo-Webqq"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">安装Mojo::Webqq</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#第一个方法—-在线安装"><span class="post-toc-number">2.6.1.</span> <span class="post-toc-text">第一个方法—-在线安装</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#第二个方法—-通过git获取源码并在本地编译"><span class="post-toc-number">2.6.2.</span> <span class="post-toc-text">第二个方法—-通过git获取源码并在本地编译</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#安装失败的部分解决方法"><span class="post-toc-number">2.6.3.</span> <span class="post-toc-text">安装失败的部分解决方法</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#RedHat-Centos"><span class="post-toc-number">2.6.3.1.</span> <span class="post-toc-text">RedHat/Centos:</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Ubuntu"><span class="post-toc-number">2.6.3.2.</span> <span class="post-toc-text">Ubuntu:</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用教程"><span class="post-toc-number">2.6.4.</span> <span class="post-toc-text">使用教程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#windows使用教程"><span class="post-toc-number">2.6.4.1.</span> <span class="post-toc-text">windows使用教程</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Linux使用教程"><span class="post-toc-number">2.6.4.2.</span> <span class="post-toc-text">Linux使用教程</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#客户端配置-1"><span class="post-toc-number">2.6.5.</span> <span class="post-toc-text">客户端配置</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#重点"><span class="post-toc-number">2.6.6.</span> <span class="post-toc-text">重点</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#写在后面（XD）"><span class="post-toc-number">2.6.7.</span> <span class="post-toc-text">写在后面（XD）</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#感谢列表"><span class="post-toc-number">2.6.8.</span> <span class="post-toc-text">感谢列表</span></a></li></ol></li></ol></li></ol>

        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script>
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').css('background-image', 'url(' + '/img/random/material-' + randomNum + '.png' + ')');
</script>

        
    
            <p class="article-headline-p">
                Mojo 框架基本使用（perl语言）
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Mystery0 M</strong>
        <span>2月 09, 2017</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    
        
            <!-- Busuanzi Views -->
            <a class="post_share-link" href="#">
                <li class="mdl-menu__item">
                    <span id="busuanzi_container_page_pv">
                        <span id="busuanzi_value_page_pv"></span>&nbsp;浏览量
                    </span>
                </li>
            </a>
        
    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Mojo 框架基本使用（perl语言）&url=http://imystery0.cn//2017/02/09/Mojo 框架基本使用（perl语言）/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Mojo 框架基本使用（perl语言）&url=http://imystery0.cn//2017/02/09/Mojo 框架基本使用（perl语言）/index.html&via=Mystery0 M" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://imystery0.cn//2017/02/09/Mojo 框架基本使用（perl语言）/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://imystery0.cn//2017/02/09/Mojo 框架基本使用（perl语言）/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=Mystery0の小站&title=Mojo 框架基本使用（perl语言）&summary=要么做第一个，要么做最好的一个。&pics=http://imystery0.cn/img/favicon.png&url=http://imystery0.cn/2017/02/09/Mojo 框架基本使用（perl语言）/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
        <a class="post_share-link" href="https://telegram.me/share/url?url=http://imystery0.cn//2017/02/09/Mojo 框架基本使用（perl语言）/index.html&text=Mojo 框架基本使用（perl语言）" target="_blank">
            <li class="mdl-menu__item">
                分享到 Telegram
            </li>
        </a>
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h2 id="说在前面"><a href="#说在前面" class="headerlink" title="说在前面"></a><strong>说在前面</strong></h2><p>前几天逛<a href="http://www.coolapk.com/" title="酷安" target="_blank" rel="external">酷安</a>的时候，发现了一款应用挺不错的，就是<a href="http://www.coolapk.com/apk/com.swjtu.gcmformojo" title="GCMforMojo" target="_blank" rel="external">GCMforMojo</a>。<br>在这里贴上该应用的简介：</p>
<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>在一台可以完美访问谷歌的服务器或者你自己的不关机的电脑上（建议使用hosts文件，指定gcm-http.googleapis.com的IP），利用moio-webqq这个软件（Perl语言），登录smartqq网页平台接受和发送消息，并使用提供的GCM插件，将群消息和好友消息发送到谷歌的推送服务器。谷歌服务器再把消息推送到应用。</p>
<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><p>不能接受图片消息，smartqq过段时间就会让你重新扫码登录。</p>
<p>正如这个简介所说，该应用使用的是Mojo这个框架（没毛病），使用smartqq的协议接受qq消息并通过google的gcm转发到客户端，同时可以通过客户端进行回复。</p>
<h2 id="部署过程以及简单教程"><a href="#部署过程以及简单教程" class="headerlink" title="部署过程以及简单教程"></a><strong>部署过程以及简单教程</strong></h2><p>由于我也不会这个<code>perl</code>语言，所以说精通肯定是不可能的，只能说把自己搭建的过程写出来，至少这个还是挺简单的。</p>
<h3 id="以下是linux的教程，windows用户请往下翻"><a href="#以下是linux的教程，windows用户请往下翻" class="headerlink" title="以下是linux的教程，windows用户请往下翻"></a><strong>以下是linux的教程，windows用户请往下翻</strong></h3><hr>
<h3 id="所用配置"><a href="#所用配置" class="headerlink" title="所用配置"></a>所用配置</h3><p><code>ubuntu14.04</code>能够完美访问google的vps一台<br>用于接收消息以及回复消息的android设备一部<br>一个可用的tencent账号（XD）</p>
<h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><p>从简介来看，简介中提供了windows的压缩包，所以说这个框架能够运行在windows以及linux系统中，所以windows服务器也是可以的，甚至是旧手机，以及路由器（暂时没玩过）。</p>
<h3 id="客户端配置"><a href="#客户端配置" class="headerlink" title="客户端配置"></a>客户端配置</h3><p>这里是客户端的<a href="http://www.coolapk.com/apk/com.swjtu.gcmformojo" title="下载链接" target="_blank" rel="external">下载链接</a><br>安装之后，第一次运行（需科学上网）会自动注册一个令牌，这个令牌之后我们会用到。</p>
<h3 id="安装perl"><a href="#安装perl" class="headerlink" title="安装perl"></a>安装perl</h3><p>安装之前请先确认下你的系统是否已经安装了Perl，因为除了windows，其他大部分的平台默认都可能已经预装过。<br>并且你的Perl版本至少5.10.1+，推荐5.14+。<br><a href="https://www.perl.org/get.html" title="Perl官网下载页面" target="_blank" rel="external">Perl官网下载页面</a>有包含Unix/Linux、Mac OS X、Windows多平台比较全面详细的安装说明。<br>建议大家尽量选择Binaries（二进制预编译）的版本，安装即可使用，比较方便。</p>
<table>
<thead>
<tr>
<th style="text-align:left">平台</th>
<th style="text-align:left">推荐选择</th>
<th style="text-align:left">下载地址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">Windows</td>
<td style="text-align:left">1. <strong>StrawberryPerl</strong><br>2. ActivePerl<br>3. <strong>Mojo-StrawberryPerl</strong></td>
<td style="text-align:left"><a href="http://strawberryperl.com/" target="_blank" rel="external">StrawberryPerl下载地址</a><br><a href="https://github.com/sjdy521/Mojo-StrawberryPerl" target="_blank" rel="external">Mojo-StrawberryPerl下载地址</a><br><a href="http://www.activestate.com/activeperl/downloads" target="_blank" rel="external">ActivePerl下载地址</a><br></td>
</tr>
<tr>
<td style="text-align:left">Linux</td>
<td style="text-align:left">1. <strong>系统自带</strong><br>2. <strong>yum/apt等包管理器</strong><br>3. 官方源码编译<br>4. <strong>Mojo-CentosPerl</strong><br>5. ActivePerl<br>6. Mojo-ActivePerl<br>7. DWIM-Perl</td>
<td style="text-align:left"><a href="https://github.com/sjdy521/Mojo-CentosPerl" target="_blank" rel="external">Mojo-CentosPerl下载地址</a><br><a href="http://www.activestate.com/activeperl/downloads" target="_blank" rel="external">ActivePerl下载地址</a><br><a href="https://github.com/sjdy521/Mojo-ActivePerl" target="_blank" rel="external">Mojo-ActivePerl下载地址</a><br><a href="http://dwimperl.com/linux.html" target="_blank" rel="external">DWIM-Perl下载地址</a></td>
</tr>
<tr>
<td style="text-align:left">Mac</td>
<td style="text-align:left">1. <strong>系统自带</strong><br>2. ActivePerl</td>
<td style="text-align:left"><a href="http://www.activestate.com/activeperl/downloads" target="_blank" rel="external">ActivePerl下载地址</a></td>
</tr>
</tbody>
</table>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><p><a href="https://github.com/sjdy521/Mojo-CentosPerl" title="Mojo-CentosPerl" target="_blank" rel="external">Mojo-CentosPerl</a>是基于Centos系统编译打包而成，适合Centos6.5以上的x86_64系统<br><a href="https://github.com/sjdy521/Mojo-ActivePerl" title="Mojo-ActivePerl" target="_blank" rel="external">Mojo-ActivePerl</a>是基于<code>ActivePerl</code>打包的而成，适用于linux x86_64系统，并且系统glibc 2.15+<br><a href="https://github.com/sjdy521/Mojo-StrawberryPerl" title="Mojo-StrawberryPerl" target="_blank" rel="external">Mojo-StrawberryPerl</a>是基于<code>StrawberryPerl</code>精简打包而成，适用于windows 32位/64位系统</p>
<p>由于在这里我用的是<code>ubuntu</code>，已经预装了<code>perl</code>，所以跳过这一步。</p>
<h3 id="安装cpanm"><a href="#安装cpanm" class="headerlink" title="安装cpanm"></a>安装cpanm</h3><p>方法a： 通过<code>cpan</code>安装<code>cpanm</code></p>
<pre><code>$ cpan -i App::cpanminus
</code></pre><p>方法b： 直接在线安装<code>cpanm</code></p>
<pre><code>$ curl -kL https://cpanmin.us | perl - App::cpanminus
</code></pre><p>官方服务器在国外，如果无法访问，可以选择下面的命令：</p>
<pre><code>$ curl http://share-10066126.cos.myqcloud.com/cpanm.pl|perl - App::cpanminus
</code></pre><p>基本上都是<code>Ctrl c+v</code>就能够完成的。</p>
<h3 id="安装Mojo-Webqq"><a href="#安装Mojo-Webqq" class="headerlink" title="安装Mojo::Webqq"></a>安装Mojo::Webqq</h3><p>在安装这个模块的时候有两个方法：</p>
<h4 id="第一个方法—-在线安装"><a href="#第一个方法—-在线安装" class="headerlink" title="第一个方法—-在线安装"></a>第一个方法—-在线安装</h4><p>（如果系统已经安装了该模块，执行此步骤会对模块进行升级）。</p>
<pre><code>$ cpanm Mojo::Webqq
</code></pre><p>如果安装过程中一直提示下载失败，很可能是因为访问到国外服务器网络比较差，这种情况下可以尝试按如下方式手动指定国内的镜像站点。</p>
<pre><code>$ cpanm --mirror http://mirrors.163.com/cpan/ Mojo::Webqq
</code></pre><h4 id="第二个方法—-通过git获取源码并在本地编译"><a href="#第二个方法—-通过git获取源码并在本地编译" class="headerlink" title="第二个方法—-通过git获取源码并在本地编译"></a>第二个方法—-通过git获取源码并在本地编译</h4><p>通过这个办法可以修改该插件的源码并重新编译，比如之前的一个旧版本在发布的时候只添加了好友私聊消息回复功能，群回复不能用，这种情况下就可以用这个来获取源码并修改，然后重新编译安装。</p>
<pre><code>$ git clone https://github.com/sjdy521/Mojo-Webqq.git
</code></pre><p>执行修改之后开始编译源码：</p>
<p>首先cd到项目的根目录<br>然后执行以下代码：</p>
<pre><code>perl Makefile.PL
make
make install
make clean
</code></pre><p>这样源码就编译并且成功安装了。</p>
<h4 id="安装失败的部分解决方法"><a href="#安装失败的部分解决方法" class="headerlink" title="安装失败的部分解决方法"></a>安装失败的部分解决方法</h4><p>在这里第一次安装的时候，我得到一个错误（不知道具体什么错误），看了官方的文档，得知是依赖库未安装导致的错误。<br>以下是官方文档原文：</p>
<pre><code>在安装 Mojo::Webqq 的过程中，cpan或者cpanm会帮助我们自动安装很多其他的依赖模块。
在众多的依赖模块中，安装经常容易出现问题的主要是 IO::Socket::SS。
IO::Socket::SSL 主要提供了 https 支持，在安装过程中可能会涉及到SSL相关库的编译。
对于 Linux 用户，通常采用的是编译安装的方式，系统缺少编译安装必要的环境，则会导致编译失败
对于 Windows 用户，由于不具备良好的编译安装环境，推荐采用一些已经打包比较全面的Perl运行环境
例如比较流行的 strawberryperl 或者 activeperl 的最新版本都默认包含 Mojo::Webqq 的核心依赖模块（下载地址上面有）
</code></pre><h5 id="RedHat-Centos"><a href="#RedHat-Centos" class="headerlink" title="RedHat/Centos:"></a>RedHat/Centos:</h5><pre><code>$ yum install -y openssl-devel
</code></pre><h5 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu:"></a>Ubuntu:</h5><pre><code>$ sudo apt-get install libssl-dev
</code></pre><p>搞定了编译和运行环境之后，重新安装Mojo::Webqq即可。</p>
<hr>
<h4 id="使用教程"><a href="#使用教程" class="headerlink" title="使用教程"></a>使用教程</h4><h5 id="windows使用教程"><a href="#windows使用教程" class="headerlink" title="windows使用教程"></a><strong>windows使用教程</strong></h5><p>很简单，直接下载<a href="http://pan.baidu.com/s/1jIhZfs6" title="这个压缩包" target="_blank" rel="external">这个压缩包</a>，然后解压，修改<code>mojo_webqq.pl</code>以及<code>mojo_weixin.pl</code>,填入客户端<code>token</code>，运行<code>start_mojo_webqq.bat</code>和<code>start_mojo_weixin.bat</code>即可。</p>
<h5 id="Linux使用教程"><a href="#Linux使用教程" class="headerlink" title="Linux使用教程"></a><strong>Linux使用教程</strong></h5><p>对于我们linux用户来说，我们已经通过上面的步骤安装了<code>Mojo::Webqq</code>这个插件了，至于要通过文件进行启动即可，而这个插件使用<code>perl</code>来写的，所以自然是使用<code>perl</code>的语法来使用。<br>新建一个pl文件</p>
<pre><code>$ vi xxx.pl
</code></pre><p><strong>其中xxx表示文件名，可自行修改。</strong><br>然后将下面的内容粘贴到这个文件中（vim编辑器）：</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/env perl</span></div><div class="line"><span class="keyword">use</span> Mojo::Webqq; <span class="comment">#微信使用 use Mojo::Weixin</span></div><div class="line"><span class="keyword">my</span> $client = Mojo::Webqq-&gt;new(<span class="string">log_encoding=&gt;</span><span class="string">"utf-8"</span>);</div><div class="line">$client-&gt;load(<span class="string">"ShowMsg"</span>); <span class="comment">#将接收到的消息在控制台打印出来，如果不需要可删除该行</span></div><div class="line">$client-&gt;load(<span class="string">"GCM"</span>,<span class="string">data=&gt;</span>&#123;</div><div class="line">	<span class="string">api_url =&gt;</span> <span class="string">'https://gcm-http.googleapis.com/gcm/send'</span>,</div><div class="line">	<span class="string">api_key=&gt;</span><span class="string">'AIzaSyB18io0hduB_3uHxKD3XaebPCecug27ht8'</span>,</div><div class="line">	<span class="string">registration_ids=&gt;</span>[<span class="string">"输入你自己从 GCMForMojo APP中获取到的令牌"</span>],</div><div class="line">	<span class="string">allow_group=&gt;</span>[<span class="string">"接受群消息的号码，如需要推送全部群消息可删除这一行，每个群号码之间使用 "</span><span class="string">", 分隔"</span>],</div><div class="line">	<span class="string">ban_group=&gt;</span>[],</div><div class="line">	<span class="string">allow_discuss=&gt;</span>[],</div><div class="line">	<span class="string">ban_discuss=&gt;</span>[],</div><div class="line">&#125;);</div><div class="line">$client-&gt;load(<span class="string">"Openqq"</span>,<span class="string">data=&gt;</span>&#123;</div><div class="line"><span class="comment">#如果是微信改为 Openwx</span></div><div class="line">	<span class="string">listen =&gt;</span> [&#123;<span class="string">host=&gt;</span><span class="string">"0.0.0.0"</span>,<span class="string">port=&gt;</span><span class="number">5000</span>&#125;, ] ,</div><div class="line"><span class="comment">#如果是推送微信的话需要设置不同的端口，并请保证所设定的端口已经在防火墙内放行，同时需要在 APP 内设定好推送服务器的地址和端口</span></div><div class="line">&#125;);</div><div class="line"><span class="comment">#不需要 APP 内回复功能请删除以上两行（不包括被 # 号注释掉的几行）</span></div><div class="line">$client-&gt;run();</div></pre></td></tr></table></figure>
<p>其中的token一行填上我们在app中获取到的token<br>保存退出，然后执行</p>
<pre><code>$ perl xxx.pl
</code></pre><p><strong>其中xxx表示文件名，可自行修改。</strong></p>
<h4 id="客户端配置-1"><a href="#客户端配置-1" class="headerlink" title="客户端配置"></a>客户端配置</h4><p>完成了服务端的配置，现在我们应该能够通过客户端接收消息了，但是我们仍然无法回复消息，这是因为我们客户端的配置还没完成。<br>打开客户端，打开设置，里面有一个回复消息的公网url地址，在这里我们填上以下地址：</p>
<pre><code>http://（服务器的公网ip）:5000
</code></pre><p>其中的5000是端口，请确保你的服务器能够通过这个端口，并且与你在pl文件中填写的一致。请注意链接中填写的是公网，填写本地ip是没用的。<br>现在我们就完成了所有的配置。</p>
<h4 id="重点"><a href="#重点" class="headerlink" title="重点"></a>重点</h4><p>如果你现在windows上测试这个框架，你就会发现如果关闭命令行的窗口，这个框架便会随之关闭，同样，在linux上依旧是如果断开ssh连接，这个进程会被系统杀掉，为了让这个进程一直在后台运行，我们需要借助一些方法，在这里，我使用的是screen，一个linux上的软件，具体的安装方法自行谷歌（不推荐百度，纯粹是个人觉得）。<br>安装好之后新开一个screen，然后在这个screen中运行<code>perl xxx.pl</code>，<code>Ctrl A+d</code>隐藏这个screen，这样框架就一直在后台运行了。</p>
<hr>
<h4 id="写在后面（XD）"><a href="#写在后面（XD）" class="headerlink" title="写在后面（XD）"></a>写在后面（XD）</h4><p>到了这里，基本上教程就写完了。<br>其实这个框架很强大，除了转发（我喜欢这么说）qq消息以及回复qq消息之外，还可以实现很多功能，比如说qq机器人等。</p>
<p>以下是一些官网的链接：<br><a href="https://metacpan.org/pod/distribution/Mojo-Webqq/doc/Webqq.pod" title="Mojo-Webqq开发文档" target="_blank" rel="external">Mojo-Webqq开发文档</a></p>
<p><a href="https://github.com/sjdy521/Mojo-Webqq/blob/master/API.md" title="Mojo-WebqqAPI文档" target="_blank" rel="external">Mojo-WebqqAPI文档</a></p>
<p><a href="https://github.com/sjdy521/Mojo-Webqq" title="Mojo-Webqq Github地址" target="_blank" rel="external">Mojo-Webqq Github地址</a></p>
<h4 id="感谢列表"><a href="#感谢列表" class="headerlink" title="感谢列表"></a>感谢列表</h4><p><a href="https://blog.kotomei.tk/2017/01/21/GCM%20For%20Mojo%20%E7%9A%84%E9%83%A8%E7%BD%B2%E4%B8%8E%E8%AE%BE%E5%AE%9A/" title="GCMForMojo 的部署与设置 by kotomei" target="_blank" rel="external">GCMForMojo 的部署与设置 by kotomei</a></p>
<p><a href="https://github.com/sjdy521/Mojo-Webqq/" title="Mojo:WebQQ by sjdy521" target="_blank" rel="external">Mojo:WebQQ by sjdy521</a></p>
<p><a href="https://github.com/sjdy521/Mojo-Weixin/" title="Mojo::Weixin by sjdy521" target="_blank" rel="external">Mojo::Weixin by sjdy521</a></p>
<p><a href="http://www.coolapk.com/apk/com.swjtu.gcmformojo" title="GCMforMojo by jklmn" target="_blank" rel="external">GCMforMojo by jklmn</a></p>
<p>软件交流：</p>
<p>QQ：611537356<br>Telegram：<a href="https://t.me/GCMforMojo" title="Telegram链接" target="_blank" rel="external">Telegram链接</a></p>

    

    
</div>


                

                <!-- Post Comments -->
                
                    


    <!-- 使用 DISQUS -->
    <div id="disqus-comment">
        <div id="disqus_thread"></div>
<script>
    queue.offer(function() {
            var disqus_config = function () {
                this.page.url = 'http://imystery0.cn/2017/02/09/Mojo 框架基本使用（perl语言）/index.html';  // Replace PAGE_URL with your page's canonical URL variable
                this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
            };

            (function() { // DON'T EDIT BELOW THIS LINE
                var d = document;
                var s = d.createElement('script');
                s.src = '//mystery0.disqus.com/embed.js';
                s.setAttribute('data-timestamp', + new Date());
                (d.head || d.body).appendChild(s);
            })();
        });
</script>

    </div>
    <style>
        #disqus-comment{
            background-color: #eee;
            padding: 2pc;
        }
    </style>



                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2017/02/18/斐讯K2 A6版 V22.4.6.3 路由器刷机踩坑/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/01/12/Ubuntu使用Shadowsocks-qt5科学上网/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.jpg);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="Mystery0 M's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        mystery0dyl520@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/" target="_self">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2017/02/">二月 2017<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/01/">一月 2017<span class="sidebar_archives-count">9</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Android/">Android<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/C/">C++<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/Linux-路由器/">Linux 路由器<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/Ubuntu/">Ubuntu<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/博客/">博客<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/系统/">系统<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/about" title="关于">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于
            </a>
        </li>
        
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

    <a href="mailto:hiviosey@gmail.com" class="sidebar-footer-text-a">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
        sidebar.help
        <span class="mdl-button__ripple-container">
          <span class="mdl-ripple"></span>
        </span>
      </div>
    </a>

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

    <a href="https://blog.viosey.com/index.php/Material.html" target="_blank" class="sidebar-footer-text-a">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
             sidebar.about_theme
            <span class="mdl-button__ripple-container"><span class="mdl-ripple"></span></span></div>
    </a>

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/Mystery00dyl" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-twitter.png);">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/profile.php?id=100011361983621&amp;ref=bookmarks" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-facebook.png);">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://plus.google.com/109157499544556604338" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-gplus.png);">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/Mystery00" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-github.png);">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    
        <a href="http://space.bilibili.com/4386572/#!/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-bilibili.png);">
                <span class="visuallyhidden">Bilibili</span>
            </button><!--
     --></a>
    

    <!-- Telegram -->
    
        <a href="https://t.me/Mystery0" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn" style="background-image: url(/img/footer/footer_ico-telegram.png);">
                <span class="visuallyhidden">Telegram</span>
            </button><!--
     --></a>
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;
            <script type="text/javascript">
                var fd = new Date();
                document.write(fd.getFullYear());
            </script>
            &nbsp;Mystery0の小站
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->
<script src="/js/lazyload.min.js"></script>
<script src="/js/js.min.js"></script>
<script src="/js/nprogress.js"></script>

<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>







    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>





    <!-- 使用 DISQUS js 代码 -->
    <script id="dsq-count-scr" src="//mystery0.disqus.com/count.js" async></script>



<!-- Swiftye -->


<!-- Local Search-->


<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->


                </main>
            </div>
        </body>
    
</html>
